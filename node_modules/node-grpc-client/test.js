const path = require('path');
const PROTO_PATH = path.resolve(__dirname, './helloworld.proto');

const GRPCClient = require('./index.js');

const myClient = new GRPCClient(PROTO_PATH, 'com.pkgtest', 'TestService', 'localhost:50051');

const dataToSend = {
    nums: [2,3,4,5, 6]
};

(async function () {

    console.log('Hello world');

    /* const response1 = await myClient.sumSync(dataToSend, {
        metadata: {
            'testing': 'headers',
            'i-am-happy': 'headers'
        }
    }); */

    const fnAnswer = (err, data2, x) => {

        console.log('data::: ', data2);

    };

    const opts = {
        metadata: {
            x: '2', 
            'yu-bin2': '2'
        }
    };

    /* const x = myClient.sumAsync(dataToSend, fnAnswer, opts);

    console.log('x::: ', x); */

    myClient.runService("sum", dataToSend, fnAnswer, opts);

    // console.log('The answer of request 1: ', response1);

})();